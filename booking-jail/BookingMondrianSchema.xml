<Schema name="ojbc_booking_analytics_demo">
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Age">
		<Hierarchy name="PersonAge" visible="true" hasAll="true" primaryKey="PersonAgeID" primaryKeyTable="PersonAge" caption="Age">
			<Join leftKey="PersonAgeRangeID" rightKey="PersonAgeRangeID">
				<Table name="PersonAge"/>
				<Table name="PersonAgeRange"/>
			</Join>
			<Level name="AgeRange" visible="true" column="AgeRange" table="PersonAgeRange" ordinalColumn="AgeRangeSort" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
			<Level name="AgeYears" visible="true" column="AgeInYears" table="PersonAge" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Age Range">
		<Hierarchy name="AgeRange" visible="true" hasAll="true" allMemberName="All Ranges" allMemberCaption="All Ranges" primaryKey="PersonAgeRangeID" caption="Age Range">
			<Table name="PersonAgeRange"/>
			<Level name="Age Range" visible="true" table="PersonAgeRange" column="AgeRange" ordinalColumn="AgeRangeSort" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Agency">
		<Hierarchy name="Agency" visible="true" hasAll="true" allMemberName="All Agencies" allMemberCaption="All Agencies" primaryKey="AgencyID">
			<Table name="Agency"/>
			<Level name="Agency" visible="true" table="Agency" column="AgencyName" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Race">
		<Hierarchy name="Race" visible="true" hasAll="true" primaryKey="PersonRaceID" caption="Race">
			<Table name="PersonRace"/>
			<Level name="Race" visible="true" table="PersonRace" column="PersonRaceDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Gender">
		<Hierarchy name="Gender" visible="true" hasAll="true" allMemberName="All Sexes" allMemberCaption="All Sexes" caption="Sex" primaryKey="PersonSexID">
			<Table name="PersonSex"/>
			<Level name="Gender" visible="true" table="PersonSex" column="PersonSexID" nameColumn="PersonSexDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="PopulationType" >
		<Hierarchy name="PopulationType" hasAll="true" viaible="true" allMemberName="All Population Type" primaryKey="PopulationTypeID" caption="Population Type">
			<Table name="PopulationType"/>
			<Level name="Population Type" table="PopulationType" column="PopulationType" uniqueMembers="true" type="String" levelType="Regular" hideMemberIf="Never" />
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="CaseStatus">
		<Hierarchy name="Case Status" visible="true" hasAll="true" allMemberName="All Statuses" allMemberCaption="All Statuses" caption="Statuses" primaryKey="StatusID">
			<Table name="CaseStatus"/>
			<Level name="Case Status" visible="true" table="CaseStatus" column="Status" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Pretrial Status">
		<Hierarchy name="Pretrial Status" visible="true" hasAll="true" allMemberName="All Statuses" allMemberCaption="All Statuses" caption="Statuses" primaryKey="PretrialStatusID">
			<Table name="PretrialStatus"/>
			<Level name="Pretrial Status" visible="true" table="PretrialStatus" column="PretrialStatus" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Jurisdiction">
		<Hierarchy name="Jurisdiction" visible="true" hasAll="true" allMemberName="All Jurisdictions" allMemberCaption="All Jurisdictions" caption="Jurisdiction" primaryKey="JurisdictionID">
			<Table name="Jurisdiction"/>
			<Level name="Jurisdiction" visible="true" table="Jurisdiction" column="JurisdictionName" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Facility">
		<Hierarchy name="Facility" visible="true" hasAll="true" allMemberName="All Facilities" allMemberCaption="All Facilities" caption="Facility" primaryKey="FacilityID">
			<Table name="Facility"/>
			<Level name="Facility" visible="true" table="Facility" column="FacilityName" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Bed Type">
		<Hierarchy name="Bed Type" visible="true" hasAll="true" allMemberName="All Bed Types" allMemberCaption="All Bed Types" caption="Bed Type" primaryKey="BedTypeID">
			<Table name="BedType"/>
			<Level name="Bed Type" visible="true" table="BedType" column="BedType" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Income Level">
		<Hierarchy name="Income Level" visible="true" hasAll="true" allMemberName="All Income Levels" allMemberCaption="All Income Levels" caption="Income Level" primaryKey="IncomeLevelID">
			<Table name="IncomeLevel"/>
			<Level name="Income Level" visible="true" table="IncomeLevel" column="IncomeLevel" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Occupation">
		<Hierarchy name="Occupation" visible="true" hasAll="true" allMemberName="All Occupations" allMemberCaption="All Occupations" caption="Occupation" primaryKey="OccupationID">
			<Table name="Occupation"/>
			<Level name="Occupation" visible="true" table="Occupation" column="Occupation" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Education Level">
		<Hierarchy name="Education Level" visible="true" hasAll="true" allMemberName="All Education Levels" allMemberCaption="All Education Levels" caption="Education Level" primaryKey="EducationID">
			<Table name="Education"/>
			<Level name="Education Level" visible="true" table="Education" column="EducationLevel" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Language">
		<Hierarchy name="Language" visible="true" hasAll="true" allMemberName="All Languages" allMemberCaption="All Languages" caption="Language" primaryKey="LanguageID">
			<Table name="Language"/>
			<Level name="Language" visible="true" table="Language" column="Language" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Housing Status">
		<Hierarchy name="Housing Status" visible="true" hasAll="true" allMemberName="All Housing Statuses" allMemberCaption="All Housing Statuses" caption="Housing Status" primaryKey="HousingStatusID">
			<Table name="HousingStatus"/>
			<Level name="Housing Status" visible="true" table="HousingStatus" column="HousingStatusDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Bond Type">
		<Hierarchy name="Bond Type" visible="true" hasAll="true" allMemberName="All Bond Types" allMemberCaption="All Bond Types" caption="Bond Type" primaryKey="BondTypeID">
			<Table name="BondType"/>
			<Level name="Bond Type" visible="true" table="BondType" column="BondType" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Population Type">
		<Hierarchy name="Population Type" visible="true" hasAll="true" allMemberName="All Population Types" allMemberCaption="All Population Types" caption="Population Type" primaryKey="PopulationTypeID">
			<Table name="PopulationType"/>
			<Level name="Population Type" visible="true" table="PopulationType" column="PopulationType" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Charge Type">
		<Hierarchy name="Charge Type" visible="true" hasAll="true" allMemberName="All Charge Types" allMemberCaption="All Charge Types" caption="Charge Type" primaryKey="ChargeTypeID">
			<Table name="ChargeType"/>
			<Level name="Charge Type" visible="true" table="ChargeType" column="ChargeType" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Behavior Health Type">
		<Hierarchy name="Behavior Health Type" visible="true" hasAll="true" allMemberName="All Behavior Health Types" allMemberCaption="All Behavior Health Types" caption="Behavior Health Type" primaryKey="BehaviorHealthTypeID">
			<Table name="BehaviorHealthType"/>
			<Level name="Behavior Health Type" visible="true" table="BehaviorHealthType" column="BehaviorHealthDescription" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	
	<Cube name="JailEpisodeSnapshot">
		<View alias="jailEpisodeSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select JailEpisodeID, JurisdictionID, SendingAgency, LengthOfStay, CaseStatusID, BondAmount, BondTypeID, PretrialStatusID, FacilityID,  
        	 		 BedTypeID, HousingStatusID, ArrestLocationLatitude, ArrestLocationLongitude, RecidivistIndicator, PersonAgeID, PersonRaceID, PersonSexID, PopulationTypeID,  
        	 		 IncomeLevelID, OccupationID, EducationID, LanguageID
        	 	  	 from JailEpisode t left join Person p on p.PersonID = t.PersonID where t.DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="SendingAgency" highCardinality="false"/>
		<DimensionUsage source="CaseStatus" name="CaseStatus" visible="true" foreignKey="CaseStatusID" highCardinality="false"/>
		<DimensionUsage source="Bond Type" name="Bond Type" visible="true" foreignKey="BondTypeID" highCardinality="false"/>
		<DimensionUsage source="Pretrial Status" name="Pretrial Status" visible="true" foreignKey="PretrialStatusID" highCardinality="false"/>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Housing Status" name="Housing Status" visible="true" foreignKey="HousingStatusID" highCardinality="false"/>
		<DimensionUsage source="Bed Type" name="Bed Type" visible="true" foreignKey="BedTypeID" highCardinality="false"/>
		<DimensionUsage source="Age" name="Age" caption="Age" visible="true" foreignKey="PersonAgeID" highCardinality="false"/>
		<DimensionUsage source="Race" name="Race" visible="true" foreignKey="PersonRaceID" highCardinality="false"/>
		<DimensionUsage source="Gender" name="Gender" visible="true" foreignKey="PersonSexID" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Income Level" name="Income Level" visible="true" foreignKey="IncomeLevelID" highCardinality="false"/>
		<DimensionUsage source="Occupation" name="Occupation" visible="true" foreignKey="OccupationID" highCardinality="false"/>
		<DimensionUsage source="Education Level" name="Education Level" visible="true" foreignKey="EducationID" highCardinality="false"/>
		<DimensionUsage source="Language" name="Language" visible="true" foreignKey="LanguageID" highCardinality="false"/>
		
 		<Measure name="Defendant Count" column="JailEpisodeID" aggregator="count" 
			formatString="#,###" />
 		<Measure name="Bond Amount" column="BondAmount" aggregator="sum"
			formatString="#,###.00" />
 		<Measure name="Total Length Of Stay" column="LengthOfStay" aggregator="sum"
			formatString="#,###" />
 		<Measure name="Total Recidivist Count" column="RecidivistIndicator" aggregator="sum"
			formatString="#,###" visible="false"/>
			
		<CalculatedMember name="Average Length Of Stay" caption="Average Length Of Stay" dimension="Measures">
			<Formula>[Measures].[Total Length Of Stay] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#,###"/>
		</CalculatedMember>
		<CalculatedMember name="Recidivist Rate" caption="Recidivist Rate" dimension="Measures">
			<Formula>[Measures].[Total Recidivist Count] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#0.0 %"/>
		</CalculatedMember>
	</Cube>
			
	<Cube name="JailEpisodeChargeTypeSnapshot">
		<View alias="jailEpisodeChargeTypeSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select t.JailEpisodeID, LengthOfStay, RecidivistIndicator, ChargeTypeID, FacilityID, JurisdictionID, SendingAgency, PopulationTypeID
					from JailEpisode t
					left join Person p on p.PersonID = t.PersonID
					left join JailEpisodeChargeType c on c.JailEpisodeID = t.JailEpisodeID 
					where t.DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="SendingAgency" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Charge Type" name="Charge Type" visible="true" foreignKey="ChargeTypeID" highCardinality="false"/>
		
 		<Measure name="Defendant Count" column="JailEpisodeID" aggregator="count" 
			formatString="#,###" />
 		<Measure name="Total Length Of Stay" column="LengthOfStay" aggregator="sum"
			formatString="#,###" />
 		<Measure name="Total Recidivist Count" column="RecidivistIndicator" aggregator="sum"
			formatString="#,###" visible="false"/>
			
		<CalculatedMember name="Average Length Of Stay" caption="Average Length Of Stay" dimension="Measures">
			<Formula>[Measures].[Total Length Of Stay] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#,###"/>
		</CalculatedMember>
		<CalculatedMember name="Recidivist Rate" caption="Recidivist Rate" dimension="Measures">
			<Formula>[Measures].[Total Recidivist Count] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#0.0 %"/>
		</CalculatedMember>
	</Cube>

	<Cube name="JailEpisodeBehaviorHealthSnapshot">
		<View alias="jailEpisodeBehaviorHealthSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select t.JailEpisodeID, LengthOfStay,FacilityID, RecidivistIndicator, BehaviorHealthTypeID,JurisdictionID, SendingAgency, PopulationTypeID
					from JailEpisode t
					left join Person p on p.PersonID = t.PersonID
					right join BehaviorHealthAssessment b on b.PersonID = t.PersonID 
					where t.DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="SendingAgency" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Behavior Health Type" name="Behavior Health Type" visible="true" foreignKey="BehaviorHealthTypeID" highCardinality="false"/>
		
 		<Measure name="Defendant Count" column="JailEpisodeID" aggregator="count" 
			formatString="#,###" />
 		<Measure name="Total Length Of Stay" column="LengthOfStay" aggregator="sum"
			formatString="#,###" />
 		<Measure name="Total Recidivist Count" column="RecidivistIndicator" aggregator="sum"
			formatString="#,###" visible="false"/>
			
		<CalculatedMember name="Average Length Of Stay" caption="Average Length Of Stay" dimension="Measures">
			<Formula>[Measures].[Total Length Of Stay] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#,###"/>
		</CalculatedMember>
		<CalculatedMember name="Recidivist Rate" caption="Recidivist Rate" dimension="Measures">
			<Formula>[Measures].[Total Recidivist Count] / [Measures].[Defendant Count]</Formula>
			<CalculatedMemberProperty name="FORMAT_STRING" value="#0.0 %"/>
		</CalculatedMember>
	</Cube>
	
	<Cube name="DailyPopulationSnapshot">
		<View alias="dailyPopulationSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select DailyPopulationID, EpisodeCount, JurisdictionID, SendingAgency, CaseStatusID, PretrialStatusID, FacilityID,  
        	 		 BedTypeID, HousingStatusID, PersonAgeID, PersonRaceID, PersonSexID, PopulationTypeID,  
        	 		 IncomeLevelID, OccupationID, EducationID, LanguageID
        	 	  	 from DailyPopulation where DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="SendingAgency" highCardinality="false"/>
		<DimensionUsage source="CaseStatus" name="CaseStatus" visible="true" foreignKey="CaseStatusID" highCardinality="false"/>
		<DimensionUsage source="Bond Type" name="Bond Type" visible="true" foreignKey="BondTypeID" highCardinality="false"/>
		<DimensionUsage source="Pretrial Status" name="Pretrial Status" visible="true" foreignKey="PretrialStatusID" highCardinality="false"/>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Housing Status" name="Housing Status" visible="true" foreignKey="HousingStatusID" highCardinality="false"/>
		<DimensionUsage source="Bed Type" name="Bed Type" visible="true" foreignKey="BedTypeID" highCardinality="false"/>
		<DimensionUsage source="Age" name="Age" caption="Age" visible="true" foreignKey="PersonAgeID" highCardinality="false"/>
		<DimensionUsage source="Race" name="Race" visible="true" foreignKey="PersonRaceID" highCardinality="false"/>
		<DimensionUsage source="Gender" name="Gender" visible="true" foreignKey="PersonSexID" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Income Level" name="Income Level" visible="true" foreignKey="IncomeLevelID" highCardinality="false"/>
		<DimensionUsage source="Occupation" name="Occupation" visible="true" foreignKey="OccupationID" highCardinality="false"/>
		<DimensionUsage source="Education Level" name="Education Level" visible="true" foreignKey="EducationID" highCardinality="false"/>
		<DimensionUsage source="Language" name="Language" visible="true" foreignKey="LanguageID" highCardinality="false"/>
		
 		<Measure name="DailyPopulation" column="EpisodeCount" aggregator="sum" 
			formatString="#,###" />
	</Cube>
	<Cube name="ChargedDailyPopulationSnapshot">
		<View alias="chargedDailyPopulationSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select ChargedDailyPopulationID, EpisodeCount, ChargeTypeID, JurisdictionID, AgencyID, FacilityID, PopulationTypeID  
        	 	  	 from ChargedDailyPopulation where DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="AgencyID" highCardinality="false"/>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Charge Type" name="Charge Type" visible="true" foreignKey="ChargeTypeID" highCardinality="false"/>
		
 		<Measure name="DailyPopulation" column="EpisodeCount" aggregator="sum" 
			formatString="#,###" />
	</Cube>
	
	<Cube name="BehaviorHealthDailyPopulationSnapshot">
		<View alias="behaviorHealthDailyPopulationSnapshot">
		    <SQL dialect="mysql">
		        <![CDATA[ select BehaviorHealthDailyPopulationID, EpisodeCount, BehaviorHealthTypeID, JurisdictionID, AgencyID, FacilityID, PopulationTypeID  
        	 	  	 from BehaviorHealthDailyPopulation where DaysAgo = 1]]>
			</SQL>
		</View>
		<DimensionUsage source="Jurisdiction" name="Jurisdiction" visible="true" foreignKey="JurisdictionID" highCardinality="false"/>
		<DimensionUsage source="Agency" name="Agency" visible="true" foreignKey="AgencyID" highCardinality="false"/>
		<DimensionUsage source="Facility" name="Facility" visible="true" foreignKey="FacilityID" highCardinality="false"/>
		<DimensionUsage source="Population Type" name="Population Type" visible="true" foreignKey="PopulationTypeID" highCardinality="false"/>
		<DimensionUsage source="Behavior Health Type" name="Behavior Health Type" visible="true" foreignKey="BehaviorHealthTypeID" highCardinality="false"/>
		
 		<Measure name="DailyPopulation" column="EpisodeCount" aggregator="sum" 
			formatString="#,###" />
	</Cube>
</Schema>